# $Header: mkinitramfs-ll/KnownIssue,v 0.4.0 2011/11/24 -tclover Exp $
#
#-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
# a device list should have two and only two groups because the awk script that 
# parse devices behaves strangely with three groups (>=init-0.4.0). And one 
# group can be an empty group with the header `[root]', `[swap]' or `[toi]'.
# resume group is called `[toi]' because resume is a reserved word for awk(?).
#-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
# well, this should have been added to begin with, when using sdr|sqfsd-rebuild
# to rebuild bin:lib64 after having updated util-linux/coreutiles, cp cannot
# override itself of course and the libraries linked to cp. So one has to copy
# (with a `cp -a') and move those files afterwards to where they should be.
# WARING: if libraries from lib64 for amd64 users, or lib32 for x86 users, are 
# part of that very few files which werent copied over the underlying directory
# one should reboot ASAP! because in that case rc-svcdir, for OpenRC users, is 
# moved to `/var/lib/init.d' and one cannot do that moving quick enough before 
# rc update `/lib/rc/init.d'--MEANING--rc will take an empty directory for NO
# services is running/or services were killed or something. For those who use
# GNOME or KDE you may not have enough time to reboot before that thing happen
# meaning you'll be forced to hard reboot because your box will be running fine
# but you cannot use it anymore for some reason-well there's no services running
# for rc even if they are, in fact, running. I can reboot without any hassle e17 
# and I could barely do it with GNOME-2.3x--I had to watch over when rebuilding 
# lib64 after a util-linux/coreutils update and reboot asap after a failure to 
# update lib64 and move back `/lib64/rc/init.d'.
# SO A REBOOT IS NECESSARY TO COPY OVER `/newroot/sqfsd/lib64/ro' 
# (with a `cp -ar') to `/newroot/lib64' in the minimal shell--easily done.
# Of course if you can ssh over your box and move back rc-svcdir maybe... or 
# wait untill next reboot to update the underlying bin:lib$ARCH if it's just 
# a failure to copy a few files.
#-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
# not so sure if the `echo|info $msg' disappeared totaly, one can safely input 
# another PV without the `msg': hit Enter then input another PV and hit enter 
# when dev/sdxy get remapped. Anyway, running the init script in a chrooted 
# initrd-ll.* initramfs root directory with everything in it and using busybox 
# as the shell, everything runs fine but the the fsck failure.  Every single msg
# is printed properly. I have yet to test everything in a real system boot.
#-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
# it seems there's a lagging/racing of `echo $msg' that make fsck or mount 
# fail or rather $lv_rdev seems to be empty just before fsck and mount cmd.
# After removing an `info' and `echo' in exec_lvm() and an `echo' at the end 
# of exec_cryptsetup() mount get the value in time but not fsck... ridiculous.
# no clue on this one.
#-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
# The `login lockup' seems to have disappeared completely on my desktop and 
# laptop which is good. In fact, I tried resetting `RC_SVCDIR'--replacing 
# `: ${RC_SVCDIR:=/lib64/rc/init.d}' by a simple `RC_SVCDIR=/var/lib/rc.init.d'-
# -and rc-svcdir was in fact mounted there after rebooting. That resetting was 
# necessary since just replacing `/lib64/rc/init.d' by `/var/lib/rc.init.d' did 
# not do the trick. However the change wasn't kept after the next reboot and 
# rc-svcdir was mounted on `/lib64/rc/init.d/' and my mod disappeared with  no 
# login errors!
#-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
# Now I have an unxpected issue when resuming from hibernation with my desktop. 
# The script runs seamlessly on my laptop and I can resume in no time. However, 
# this doesn't work on my desktop. After a hibernation to a swap file TuxOnIce 
# fails to resume because if fails to lock the LV where the swapfile is located. 
# I runned `cat /sys/power/tuxonice/resume' for sanity check and was stunned to 
# notice this `file:/dev/<VG>/<LV>:<signature>' instead of 
# `file:/dev/mapper/<VG>-<LV>:<signature>' as that value should be assigned 
# before the previous one. And then went to check if in fact `/dev/<VG>' was 
# available and IT WAS which is not on my laptop. Now I don't get why TOI fails 
# to lock up the LV.
#-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
#
# vim:fenc=utf-8:ci:pi:sts=0:sw=4:ts=4:
